import{r as t,c as s,h as i,H as e,g as h}from"./p-809191ee.js";const n=class{constructor(i){t(this,i),this.currentItems=[],this.open=!1,this.items=[],this.filterable=!1,this.multiple=!1,this.change=s(this,"change",3)}connectedCallback(){const t=this.el.querySelectorAll("mi-dropdown-item");if(t.length>0&&(this.items=Array.from(t),this.currentItems=Array.from(t)),!this.multiple){const t=this.items.findIndex(t=>t.selected);this.selected=[this.items[t>-1?t:0]]}this.el.addEventListener("focusout",t=>{const s=t.relatedTarget;s&&this.el.contains(s)||(this.open=!1)}),this.el.addEventListener("keypress",t=>{13===t.keyCode&&(this.open=!0)})}onItemsChanged(t){if(t.some(t=>"mi-dropdown-item"!==t.tagName.toLowerCase()))throw new Error("Items contains unknown element(s).");this.currentItems=[...t],this.filter()}onChangedHandler(){this.selected=[...this.items.filter(t=>t.selected)],this.change.emit(this)}toggle(t){this.open=!this.open}selectAll(){const t=Array.from(this.currentItems);for(let s of t)s.selected=!0;this.onChangedHandler()}selectNone(){const t=Array.from(this.currentItems);for(let s of t)s.selected=!1;this.onChangedHandler()}onSelect(t,s,i){this.multiple||(Array.from(this.items).forEach(t=>{t.selected=!1}),this.open=!1,this.clearFilter()),s.selected=!s.selected,this.onChangedHandler()}filter(){if(this.filterElement){const t=this.filterElement.value,s=this.items;if(""===t)return this.currentItems=[...s];this.currentItems=[...s.filter(s=>s.text.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1)]}}clearFilter(){this.filterElement&&(this.filterElement.value="",this.currentItems=this.items)}render(){const t=this.filterable?this.renderFiltering():null,s=this.multiple?this.renderMultipleOptions():null;return i(e,null,i("mi-card",{class:{open:this.open,closed:!this.open,"no-select":!0},tabindex:"0"},i("header",{onClick:t=>this.toggle(t)},i("span",null,this.multiple?this.label:this.selected[0]?this.selected[0].text:"")),i("section",null,i("hr",null),t,s,i("ul",null,this.currentItems.map((t,i)=>this.renderListItem(t,i,s))))))}renderFiltering(){return i("div",{class:"filter-container"},i("input",{type:"text",placeholder:"Type to filter",ref:t=>this.filterElement=t,onInput:()=>{this.filter()},tabIndex:this.open?0:-1}))}renderMultipleOptions(){return i("div",{class:"multiple-options"},i("a",{onClick:()=>this.selectAll()},"Select all"),i("a",{onClick:()=>this.selectNone()},"Select none"))}renderListItem(t,s,e){return i("li",null,i("label",null,i("input",{type:"checkbox",value:s,checked:t.selected,onChange:i=>this.onSelect(i,t,s),class:{hidden:!e}}),t.text))}get el(){return h(this)}static get watchers(){return{items:["onItemsChanged"]}}static get style(){return"mi-dropdown-item{display:none}:host{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host .no-select{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host mi-card{-webkit-box-shadow:0 1px 1px rgba(0, 0, 0, 0.125), 0 2px 2px rgba(0, 0, 0, 0.125);box-shadow:0 1px 1px rgba(0, 0, 0, 0.125), 0 2px 2px rgba(0, 0, 0, 0.125);padding:0;margin:0}:host mi-card header{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;font-weight:500;font-size:1rem;line-height:1.5rem;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:40px;cursor:pointer}:host mi-card header span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}:host mi-card header::after{content:\"\";display:block;position:absolute;top:50%;right:16px;border:8px solid transparent}:host mi-card section{overflow:auto;height:auto;width:100%}:host mi-card section .filter-container{margin-left:16px;margin-right:16px;margin-bottom:16px}:host mi-card section .filter-container input[type=text]{-webkit-box-sizing:border-box;box-sizing:border-box;border-color:#c8d0e0;border-width:2px;border-style:solid;border-radius:4px;font-size:1rem;padding-left:12px;height:36px;width:100%}:host mi-card section .filter-container input[type=text]:focus{border-color:#3071d9;border-width:2px}:host mi-card section .multiple-options{margin-left:16px;margin-right:16px;margin-bottom:16px}:host mi-card section .multiple-options a{font-size:0.875rem;color:#3071d9;margin-right:12px;cursor:pointer}:host mi-card section .multiple-options a:hover{text-decoration:underline}:host mi-card section div:nth-of-type(1){margin-top:16px}:host mi-card section ul{padding:0;margin:0;border-radius:8px;list-style:none;border-top-left-radius:0;border-top-right-radius:0;max-height:384px;overflow-x:hidden;overflow-y:auto}:host mi-card section ul li{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;cursor:pointer}:host mi-card section ul li:hover{background-color:#ebeff5}:host mi-card section ul li label{font-size:1rem;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;cursor:pointer}:host mi-card section ul li label input[type=checkbox]{margin-right:12px;margin-left:0}:host mi-card section ul li label input[type=checkbox].hidden{display:none}:host mi-card.closed header::after{border-top-color:rgba(0, 0, 0, 0.4);margin-top:-4px}:host mi-card.closed section{height:0px}:host mi-card.open header::after{border-bottom-color:rgba(0, 0, 0, 0.4);margin-top:-12px}:host mi-card.open section{height:auto}:host mi-card hr{background:rgba(0, 0, 0, 0.16);border:0;height:1px;margin:0}"}};export{n as mi_dropdown};